{% extends ":home:base.html.twig" %}

{% block style %}
    <link rel="stylesheet" href="{{ asset('css/home_form_page.css') }}"/>
{% endblock style %}

{% block body %}
    <div role="main" id="main" class="containerMobileFullWidth">

        <section class="row-fluid organized">
            <div class="containerCentered">
                <div class="span12">
                    <h2 class="large">{{ 'layout.register'|trans({}, 'FOSUserBundle') }}</h2>

                    <div id="content" class="contentContainer" style="width: 60%; margin-top: 0px">
                        {% for flashMessage in app.session.flashbag.get('error') %}
                            <div id="notifications" class="notifications" tabindex="-1" style="margin-left: 4%">
                                <p class="notification notification-critical" role="alert">{{ flashMessage }}</p>
                            </div>
                        {% endfor %}
                        <form action="{{ path('fos_user_registration_register') }}" {{ form_enctype(form) }} method="POST">
                            <div id="passwordSection" class="clearfix">
                                <div class="textInput">
                                    <div class="fieldWrapper">
                                        {{ form_label(form.username, null, {'label_attr': {'class': 'fieldLabel'}}) }}
                                        {{ form_widget(form.username, {'attr': {'placeholder': 'home.register.username'|trans}}) }}
                                        {% if form_errors(form.username) %}
                                            <div class="home-form-error">
                                                <span>{{ form_errors(form.username) }}</span>
                                            </div>
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="textInput">
                                    <div class="fieldWrapper">
                                        {{ form_label(form.email, null, {'label_attr': {'class': 'fieldLabel'}}) }}
                                        {{ form_widget(form.email, {'attr': {'placeholder': 'Email'|trans}}) }}
                                        {% if form_errors(form.email) %}
                                            <div class="home-form-error">
                                                <span>{{ form_errors(form.email) }}</span>
                                            </div>
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="textInput">
                                    <div class="fieldWrapper">
                                        {{ form_label(form.name, null, {'label_attr': {'class': 'fieldLabel'}}) }}
                                        {{ form_widget(form.name, {'attr': {'placeholder': 'home.register.name'|trans}}) }}
                                        {% if form_errors(form.name) %}
                                            <div class="home-form-error">
                                                <span>{{ form_errors(form.name) }}</span>
                                            </div>
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="textInput">
                                    <div class="fieldWrapper">
                                        {{ form_label(form.surname, null, {'label_attr': {'class': 'fieldLabel'}}) }}
                                        {{ form_widget(form.surname, {'attr': {'placeholder': 'home.register.surname'|trans}}) }}
                                        {% if form_errors(form.surname) %}
                                            <div class="home-form-error">
                                                <span>{{ form_errors(form.surname) }}</span>
                                            </div>
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="textInput">
                                    <div class="fieldWrapper">
                                        {{ form_label(form.plainPassword.first, null, {'label_attr': {'class': 'fieldLabel'}}) }}
                                        {{ form_widget(form.plainPassword.first, {'attr': {'placeholder': 'form.password'|trans({}, 'FOSUserBundle')}}) }}
                                        {% if form_errors(form.plainPassword.first) %}
                                            <div class="home-form-error">
                                                <span>{{ form_errors(form.plainPassword.first) }}</span>
                                            </div>
                                        {% endif %}
                                    </div>
                                </div>
                                <div class="textInput">
                                    <div class="fieldWrapper">
                                        {{ form_label(form.plainPassword.second, null, {'label_attr': {'class': 'fieldLabel'}}) }}
                                        {{ form_widget(form.plainPassword.second, {'attr': {'placeholder': 'form.password_confirmation'|trans({}, 'FOSUserBundle')}}) }}
                                        {% if form_errors(form.plainPassword.second) %}
                                            <div class="home-form-error">
                                                <span>{{ form_errors(form.plainPassword.second) }}</span>
                                            </div>
                                        {% endif %}
                                    </div>
                                </div>
                                {% if captcha %}
                                    <div class="textInput" style="text-align: center">
                                        <div class="fieldWrapper"  style="width: 285px; margin: 0 auto">
                                            <script type="text/javascript">
                                                var onloadCallback = function() {
                                                    grecaptcha.render('captcha', {
                                                        'sitekey' : '{{ site_key }}',
                                                        'hl' : 'en',
                                                        'theme' : 'light'
                                                    });
                                                };
                                            </script>
                                            <div id="captcha"></div>
                                            <script src="https://www.google.com/recaptcha/api.js?hl=en&onload=onloadCallback&render=explicit"
                                                    async defer>
                                            </script>
                                        </div>
                                    </div>
                                {% endif %}
                            </div>
                            {{ form_rest(form) }}
                            <div class="actions actionsSpaced">
                                <button class="button actionContinue" type="submit" id="btnLogin" name="btnLogin" value="Login">
                                    {{ 'layout.register'|trans({}, 'FOSUserBundle') }}
                                </button>
                            </div>
                        </form>
                    </div>

                </div>
            </div>
        </section>

    </div>
{% endblock body %}